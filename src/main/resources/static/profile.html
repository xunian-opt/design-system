<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>ä¸ªäººä¸­å¿ƒ - è£…ä¿®å…¬å¸ç®¡ç†ç³»ç»Ÿ</title>
  <script src="navbar.js"></script>
  <style>
    /* å¤ç”¨åŸºç¡€æ ·å¼ */
    .content-card { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); max-width: 600px; margin: 0 auto; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: 500; }
    .form-group input { width: 100%; padding: 10px; border: 1px solid #d9d9d9; border-radius: 4px; outline: none; transition: all 0.3s; }
    .form-group input:focus { border-color: #1890ff; box-shadow: 0 0 0 2px rgba(24,144,255,0.1); }
    .btn { padding: 10px 24px; background: #1890ff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; transition: 0.3s; }
    .btn:hover { background: #40a9ff; }
    .header { text-align: center; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
    .avatar-large { width: 80px; height: 80px; border-radius: 50%; background: #eee; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 32px; color: #999; }
    .msg { padding: 10px; border-radius: 4px; margin-bottom: 15px; display: none; text-align: center; }
    .msg.success { background: #f6ffed; border: 1px solid #b7eb8f; color: #389e0d; display: block; }
    .msg.error { background: #fff1f0; border: 1px solid #ffccc7; color: #cf1322; display: block; }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="content">
      <div class="content-card">
        <div class="header">
          <div class="avatar-large">ğŸ‘¤</div>
          <h2>ç®¡ç†å‘˜èµ„æ–™è®¾ç½®</h2>
        </div>
        <div id="msg" class="msg"></div>
        <div class="form-group">
          <label>ç”¨æˆ·å</label>
          <input type="text" value="admin" disabled style="background:#f5f5f5; cursor:not-allowed;">
        </div>
        <div class="form-group">
          <label>æ—§å¯†ç </label>
          <input type="password" id="oldPass" placeholder="è¯·è¾“å…¥æ—§å¯†ç ">
        </div>
        <div class="form-group">
          <label>æ–°å¯†ç </label>
          <input type="password" id="newPass" placeholder="è¯·è¾“å…¥æ–°å¯†ç ">
        </div>
        <div class="form-group">
          <label>ç¡®è®¤æ–°å¯†ç </label>
          <input type="password" id="confirmPass" placeholder="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ">
        </div>
        <button class="btn" onclick="updateProfile()">ä¿å­˜ä¿®æ”¹</button>
      </div>
    </div>
  </div>
  <script>
    async function updateProfile() {
      const oldPass = document.getElementById('oldPass').value;
      const newPass = document.getElementById('newPass').value;
      const confirmPass = document.getElementById('confirmPass').value;
      const msg = document.getElementById('msg');
      
      msg.className = 'msg'; 
      msg.textContent = '';

      if (!oldPass || !newPass) {
        msg.textContent = 'è¯·å¡«å†™å¯†ç ä¿¡æ¯'; msg.className = 'msg error'; return;
      }
      if (newPass !== confirmPass) {
        msg.textContent = 'ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´'; msg.className = 'msg error'; return;
      }

      // æ¨¡æ‹Ÿè¯·æ±‚ï¼Œå®é™…è¯·å¯¹æ¥ /users/update æ¥å£
      msg.textContent = 'å¯†ç ä¿®æ”¹æˆåŠŸï¼Œè¯·é‡æ–°ç™»å½•'; 
      msg.className = 'msg success';
      
      setTimeout(() => {
        try { localStorage.removeItem('token'); } catch(e){}
        window.location.href = 'index.html';
      }, 1500);
    }
  </script>
</body>
</html>